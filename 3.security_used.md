# 3.安全领域
`Python`在网络安全领域应用广泛，常见的有`PoC`编写、爬虫以及木马编写等，在这里将会列举常用的部分
## 3.1 Socket编程基础
`Socket`编程是众多`C/S`架构程序基础，比如游戏、`Web`服务器以及多数的木马都是基于`Socket`来实现的，在这里会涉及到`TCP/IP`协议，但是在这里默认大家都会，下面给出一个`OSI`等相关模型的概念图
![[Pasted image 20260110181728.png]]
`Socket`（套接字）是一种编程接口，一般面向网络层和传输层协议（套接字并不限定于`TCP/IP`），每个套接字绑定一个`ip`和一个端口上，不同的端口对应不同的服务，比如`Web`大多以`80/443`作为对外绑定的端口
### 3.1.1 Socket类
`Python`提供类两个基本的`socket`模块，其中`socket`它提供了标准的`BSD Socket API`，另一个`socketserver`为服务端编程提供了进一步封装，可以简化网络服务器的开发，函数声明如下所示
```python
socket(family, type[,protocal])
```
其中，`family`表示套接字对象使用的地址族，可选值有`AF_INET`（`IPv4`地址族）、`AF_INET6`（`IPv6`地址族）以及`AF_UNIX`（针对类`UNIX`系统的套接字）；`type`为可使用的类型，具体可使用的如下所示
```python
socket.SOCK_STREAM # 基于TCP的流式socket通信
socket.SOCK_DGRAM # 基于UDP的数据报式socket通信
socket.SOCK_RAW # 原始套接字（ICMP、IGMP等），且可以通过IP_HDRINCL构造IP头
socket.SOCK_SEQPACKET # 可靠的连续数据包服务
```
第三个参数`protocal`则是协议类型，默认是`0`表示套接字，不需要关心该参数，创建`TCP Socket`的方法如下
```python
sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
```
创建`UDP Socket`的方法如下所示
```python
sock = socket.socket(socket.AF_INET,socket.SOCK_DGRAN)
```
### 3.1.2 客户端编程
对于`Socket`编程中的客户端部分示例代码如下所示
```python
import socket, sys

class Client:
    def __init__(self, host):
        self.host = host
    def connet(self):
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            print("Socket 创建成功")
        except socket.error as err:
            print(f"由于 {err} 导致 Socket 创建失败")
            sys.exit(1)
        try:
            remote_ip = socket.gethostbyname(self.host) # 获取远程主机ip
        except socket.gaierror:
            print("主机名解析失败")
            sys.exit(1)
        try:
            s.connect((remote_ip,80)) # 连接远程主机
            print(f"连接到 {self.host} 的远程主机成功")
            message = b'GET / HTTP/1.1\r\n\r\n' # 发送数据(\r\n\r\n是http协议要求)
            s.sendall(message)
            print("数据发送成功")
            reply = s.recv(4096) # 接收数据
            print("数据接收成功")
            print(reply.decode())
            s.close()
        except socket.error as err:
            print(f"连接到远程主机失败: {err}")
            sys.exit(1)

if __name__ == "__main__":
    cl = Client("www.baidu.com")
    cl.connet()
```
最终的输出结果如下所示
```
数据接收成功
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: no-cache
Connection: keep-alive
Content-Length: 29506
Content-Type: text/html
Date: Sat, 10 Jan 2026 10:46:57 GMT
P3p: CP=" OTI DSP COR IVA OUR IND COM "
P3p: CP=" OTI DSP COR IVA OUR IND COM "
Pragma: no-cache
Server: BWS/1.1
Set-Cookie: BAIDUID=DA9892C61FD4E7E2793050D0FCB3D80F:FG=1; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BIDUPSID=DA9892C61FD4E7E2793050D0FCB3D80F; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: PSTM=1768042017; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BAIDUID=DA9892C61FD4E7E200252E988C8D6B3E:FG=1; max-age=31536000; expires=Sun, 10-Jan-27 10:46:57 GMT; domain=.baidu.com; path=/; version=1; comment=bd
Tr_id: pr_0xd7a5b47b00574fcb
Traceid: 176804201717823713389505042989565703200
Vary: Accept-Encoding
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta content="always" name="referrer" />
    <meta
        name="description"
        content="全球领先的中文搜索引擎、致力于让网民更便捷地获取信息，找到所求。百度超过千亿的中文网页数据库，可以瞬间找到相关的搜索结果。"
    />
    <link rel="shortcut icon" href="//www.baidu.com/favicon.ico" type="image/x-icon" />
    <link
        rel="search"
        type="application/opensearchdescription+xml"
        href="//www.baidu.com/content-search.xml"
        title="百度搜索"
    />
    <title>百度一下，你就知道</title>
    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
            text-align: center;
            background: #fff;
            height: 100%;
        }

        html {
            overflow-y: auto;
            color: #000;
            overflow: -moz-scrollbars;
            height: 100%;
        }

        body, input {
            font-size: 12px;
            font-family: "PingFang SC", Arial, "Microsoft YaHei", sans-serif;
        }

        a {
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        img {
            border: 0;
            -ms-interpolation-mode: bicubic;
        }

        input {
            font-size: 100%;
            border: 0;
        }

        body, form {
            position: relative;
            z-index: 0;
        }

        #wrapper {
            height: 100%;
        }

        #head .s-ps-islite {
            _padding-bottom: 370px;
        }

        #head_wrapper.s-ps-islite {
            padding-bottom: 370px;
        }

        #head_wrapper.s-ps-islite .s_form {
            position: relative;
            z-index: 1;
        }

        #head_wrapper.s-ps-islite .fm {
            position: absolute;
            bottom: 0;
        }

        #head_wrapper.s-ps-islite .s-p-top {
            position: absolute;
            bottom: 40px;
            width: 100%;
            height: 181px;
        }

        #head_wrapper.s-ps-islite #s_lg_img {
            position: static;
            margin: 33px auto 0 auto;
            left: 50%;
        }

        #form {
            z-index: 1;
        }

        .s_form_wrapper {
            height: 100%;
        }

        #lh {
            margin: 16px 0 5px;
            word-spacing: 3px;
        }

        .c-font-normal {
            font: 13px/23px Arial, sans-serif;
        }

        .c-color-t {
            color: #222;
        }

        .c-btn,
        .c-btn:visited {
            color: #333 !important;
        }

        .c-btn {
            display: inline-block;
            overflow: hidden;
            font-family: inherit;
            font-weight: 400;
            text-align: center;
            vertical-align: middle;
            outline: 0;
            border: 0;
```
对`Socket`客户端编程的主要步骤为：
```
1.创建套接字
2.连接服务器
3.发送数据
4.接收数据
5.关闭连接
```
### 3.1.3 服务端编程
服务端主要是做监听，因此和客户端是有一定的区别，示例代码如下所示
```python
import socket, sys

class Server:
    def __init__(self,ip,port):
        self.ip = ip
        self.port = port

    def start(self):
        s = socket.socket(socket.AF_INET,socket.SOCK_STREAM) # 创建TCP套接字
        try:
            s.bind((self.ip,self.port)) # 绑定IP和端口
            s.listen(5) # 监听连接
            print("等待客户端连接...")
            conn,addr = s.accept() # 接受连接
            print(f"客户端已连接: {addr[0]}:{addr[1]}") # 打印客户端地址
            data = conn.recv(1024) # 接收数据
            print(f"收到数据: {data.decode('utf-8')}") # 打印
            conn.sendall(bytes("你好, 客户端\n\r", encoding='utf-8')) # 发送数据
            conn.close() # 关闭连接
        except socket.error as e:
            print(f"Socket错误: {e}")
            sys.exit(1)
        finally:
            s.close() # 关闭套接字
        
if __name__ == "__main__":
    server = Server("127.0.0.1", 8080)
    server.start()
```
在客户端进行如下操作后会收到相关信息
```
nc 127.0.0.1 8080
你好，服务端，我是客户端
你好, 客户端
```
之后在服务端可以看到相关信息
```
等待客户端连接...
客户端已连接: 127.0.0.1:57452
收到数据: 你好，服务端，我是客户端
```
## 3.2 Request模块使用

## 3.3 Re模块使用
